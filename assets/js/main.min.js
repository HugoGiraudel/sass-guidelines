(function(global){"use strict";function getFocusableChildren(node){var focusableElements=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'];return $$(focusableElements.join(","),node).filter(function(child){return!!(child.offsetWidth||child.offsetHeight||child.getClientRects().length)})}function $$(selector,context){return Array.prototype.slice.call((context||document).querySelectorAll(selector)||[])}function trapTabKey(node,event){var focusableChildren=getFocusableChildren(node);var focusedItemIndex=focusableChildren.indexOf(document.activeElement);if(event.shiftKey&&focusedItemIndex===0){focusableChildren[focusableChildren.length-1].focus();event.preventDefault()}else if(!event.shiftKey&&focusedItemIndex===focusableChildren.length-1){focusableChildren[0].focus();event.preventDefault()}}function setFocusToFirstItem(node){var focusableChildren=getFocusableChildren(node);if(focusableChildren.length)focusableChildren[0].focus()}var focusedElementBeforeModal;var Modal=function(node,main){var that=this;main=main||document.querySelector("#main");this.shown=false;this.show=show;this.hide=hide;$$('[data-modal-show="'+node.id+'"]').forEach(function(opener){opener.addEventListener("click",show)});$$("[data-modal-hide]",node).concat($$('[data-modal-hide="'+node.id+'"]')).forEach(function(closer){closer.addEventListener("click",hide)});document.addEventListener("keydown",function(event){if(that.shown&&event.which===27){event.preventDefault();hide()}if(that.shown&&event.which===9){trapTabKey(node,event)}});document.body.addEventListener("focus",function(event){if(that.shown&&!node.contains(event.target)){setFocusToFirstItem(node)}},true);function show(){that.shown=true;node.removeAttribute("aria-hidden");main.setAttribute("aria-hidden","true");focusedElementBeforeModal=document.activeElement;setFocusToFirstItem(node)}function hide(){that.shown=false;node.setAttribute("aria-hidden","true");main.removeAttribute("aria-hidden");focusedElementBeforeModal.focus()}};global.Modal=Modal})(window);(function(){"use strict";var h={evalClientResolution:function evalClientResolution(size){return matchMedia("(min-width: "+size+"px)").matches},getDocumentHeight:function getDocumentHeight(){return innerHeight||document.clientHeight||document.body.clientHeight},getDocumentScrollTop:function getDocumentScrollTop(){return document.documentElement.scrollTop||document.body.scrollTop},evalClientResolution:function evalClientResolution(){return matchMedia("(min-width: 975px)").matches},getOffset:function getOffset(elem){var offset=0;do{if(!isNaN(elem.offsetTop))offset+=elem.offsetTop}while(elem=elem.offsetParent);return offset}};var App=function(config){this.languagePicker=config.languagePicker;this.language=document.documentElement.getAttribute("lang");this.isLargerThanMobile=h.evalClientResolution(680);this.chapters=document.querySelectorAll(".chapter");this.linkSvg=document.querySelector('meta[name="svg-link-icon"]').getAttribute("content");this.addChapterLinks();this.bindUI();this.addEvents()};App.prototype.addEvents=function(){addEventListener("hashchange",this.fixSkipLinks.bind(this),false);this.languagePicker.addEventListener("change",this.redirectUrl,false)};App.prototype.bindUI=function(){var input=document.querySelectorAll('input[name="syntax"]');Array.prototype.slice.call(input).forEach(function(element){element.addEventListener("click",function(event){var fn=element.value==="sass"?"add":"remove";document.body.classList[fn]("sass")})})};App.prototype.getAnchorLink=function(chapter){var heading=chapter.querySelector("h1[id]");var link=document.createElement("a");link.href="#"+heading.id;link.innerHTML=this.linkSvg;link.setAttribute("class","chapter__link button-ui");return link};App.prototype.addChapterLinks=function(){var that=this;var chapters=Array.prototype.slice.call(that.chapters);chapters.forEach(function(chapter){var wrapper=chapter.querySelector(".chapter__buttons");wrapper.appendChild(that.getAnchorLink(chapter))})};App.prototype.fixSkipLinks=function(event){var element=document.getElementById(location.hash.substring(1));if(element){if(!/^(?:a|select|input|button|textarea)$/i.test(element.tagName)){element.tabIndex=-1}element.focus()}};App.prototype.redirectUrl=function(event){window.location.href=this.value};var Sidebar=function(config){this.addOffsetView=config.addOffsetView||0;this.headings=config.headings;this.tableOfContents=config.tableOfContents;this.footer=config.footer;this.isLargerThanMobile=h.evalClientResolution(975);this.headingsOffset=Array.prototype.slice.call(this.headings).map(function(heading){return[heading,h.getOffset(heading)]});this.initialize()};Sidebar.prototype.initialize=function(){this.isLargerThanMobile&&this.evalHeadingsPosition();this.adjustTableOfContents();document.addEventListener("scroll",this.adjustTableOfContents.bind(this),false);addEventListener("scroll",this.evalHeadingsPosition.bind(this),false);addEventListener("resize",h.evalClientResolution.bind(975),false)};Sidebar.prototype.evalHeadingsPosition=function(){var scrollTop=h.getDocumentScrollTop()+this.addOffsetView;if(this.isLargerThanMobile){for(var i=0,offsets=this.headingsOffset.length;i<offsets;i++){if(scrollTop>=this.headingsOffset[i][1]&&this.headingsOffset[i+1]&&scrollTop<this.headingsOffset[i+1][1]){this.highlightTableOfContents(this.headingsOffset[i])}else if(this.headingsOffset[i]===this.headingsOffset[offsets-1]&&scrollTop>=this.headingsOffset[i][1]){this.highlightTableOfContents(this.headingsOffset[offsets-1])}}}};Sidebar.prototype.adjustTableOfContents=function(){var top=h.getOffset(this.tableOfContents);var bottom=h.getOffset(this.footer);var current=h.getDocumentScrollTop();var currentBottom=current+h.getDocumentHeight();if(current>top){this.tableOfContents.classList.add("sticky")}else{this.tableOfContents.classList.remove("sticky")}if(currentBottom>bottom){this.tableOfContents.classList.add("sticky-bottom")}else{this.tableOfContents.classList.remove("sticky-bottom")}};Sidebar.prototype.highlightTableOfContents=function(heading){var tocElem=this.tableOfContents.querySelector('a[href="#'+heading[0].id+'"]');var inViewportElem=this.tableOfContents.querySelector(".in-viewport");if(!!tocElem&&!tocElem.classList.contains("in-viewport")){if(inViewportElem){inViewportElem.classList.remove("in-viewport")}tocElem.classList.add("in-viewport")}};document.addEventListener("DOMContentLoaded",function(event){var app=new App({languagePicker:document.getElementById("language-picker")});var sidebar=new Sidebar({addOffsetView:50,headings:document.querySelectorAll(".chapter:not(.toc) > h1[id]"),tableOfContents:document.querySelector(".toc"),footer:document.querySelector(".footer")});var aside=new Modal(document.getElementById("options-panel"))})})();
